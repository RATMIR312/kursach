{% extends "base.html" %}

{% block title %}Команды - Cricket Scores API{% endblock %}

{% block content %}
<div class="page-header">
    <h1><i class="fas fa-users"></i> Команды крикета</h1>
    <p>Список всех команд, отслеживаемых системой</p>
</div>

<div class="teams-container">
    {% if teams %}
        {% for team in teams %}
        <div class="team-card">
            <div class="team-header">
                <div class="team-logo">
                    <i class="fas fa-flag"></i>
                </div>
                <div class="team-info">
                    <h2>{{ team.name }}</h2>
                    {% if team.short_name %}
                        <div class="team-shortname">{{ team.short_name }}</div>
                    {% endif %}
                </div>
            </div>
            
            <div class="team-body">
                <div class="team-details">
                    {% if team.country %}
                    <div class="detail">
                        <i class="fas fa-globe"></i>
                        <span>{{ team.country }}</span>
                    </div>
                    {% endif %}
                    
                    {% if team.founded_year %}
                    <div class="detail">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Основана в {{ team.founded_year }} году</span>
                    </div>
                    {% endif %}
                    
                    {% if team.players %}
                    <div class="detail">
                        <i class="fas fa-user-friends"></i>
                        <span>{{ team.players|length }} игроков</span>
                    </div>
                    {% endif %}
                </div>
                
                {% if team.players %}
                <div class="team-players">
                    <h4>Ключевые игроки:</h4>
                    <div class="players-list">
                        {% for player in team.players[:3] %}
                        <div class="player-chip">
                            <i class="fas fa-user"></i>
                            <span>{{ player.full_name }}</span>
                            {% if player.role %}
                                <span class="player-role">{{ player.role }}</span>
                            {% endif %}
                        </div>
                        {% endfor %}
                        
                        {% if team.players|length > 3 %}
                        <div class="player-chip more">
                            +{{ team.players|length - 3 }} еще
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
            </div>
            
            <div class="team-footer">
                <a href="{{ url_for('get_team', team_id=team.id) }}" class="btn btn-primary">
                    <i class="fas fa-chart-bar"></i> Статистика
                </a>
                <a href="{{ url_for('get_team_players', team_id=team.id) }}" class="btn btn-secondary">
                    <i class="fas fa-list"></i> Все игроки
                </a>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="empty-state">
            <i class="fas fa-users-slash fa-3x"></i>
            <h3>Команды не найдены</h3>
            <p>В базе данных пока нет информации о командах</p>
            <a href="{{ url_for('admin_page') }}" class="btn btn-primary">
                <i class="fas fa-sync-alt"></i> Запустить скрапинг
            </a>
        </div>
    {% endif %}
</div>

{% if teams %}
<div class="teams-stats">
    <div class="stats-card">
        <h3><i class="fas fa-chart-pie"></i> Общая статистика</h3>
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-label">Всего команд</div>
                <div class="stat-value">{{ teams|length }}</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Всего игроков</div>
                <div class="stat-value">{{ total_players or '0' }}</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Страны</div>
                <div class="stat-value">{{ countries_count or 'Несколько' }}</div>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
